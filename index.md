在 innodb 中表都是根据主键索引形式存放的，称为索引组织表，每个索引都是 B+树。

### 如何重建索引？

```
alter table T engine=InnoDB
```

### 采用自增 id 做主键有什么好处？

首先，如果不是自增主键的话，插入新数据的时候如果插入到中间的某个数据页上（前后都有数据），就需要在逻辑上挪动后面的数据，如果数据页已经满了，还会导致页分裂。

其次，由于自增主键还是普通索引的叶子节点，所以主键所占的空间越小越好。通常自增主键都是一个长 int，占用空间较小。

### 如何看一个请求会用什么索引

```
explain <sql>
```

### 如何看一个请求扫描了多少行

### 如何看慢查询日志

### 覆盖索引是啥

覆盖索引是一种通过建立联合索引以避免回表的手段，假设你有一个高频 sql，需要根据某个索引字段 a 查到另一个字段 b，可以考虑建立一个 a-b 联合索引，这样就可以直接从辅助索引上拿到要返回的全部数据，避免了回表。

### 最左前缀

建立联合索引的时候我们要考虑索引的复用能力，比如我们需要一个 a 索引，也需要一个 a-b 索引，但不需要 b 索引这时候我们就只用建立 a-b 索引了。

### 索引下推是啥

索引下推是 mysql5.6 引入的特性。比如我们有个 user 表，然后有一个 name-age 的索引，我们进行下面的请求。

```
select * from user where name like '张%' and age=10;
```

如果没有索引下推的话，请求只能在 name-age 索引上找到所有姓张的人的 id，然后回表到主键上一个一个查出 user 并比较 age 是否满足。但有了索引下推之后，就可以在变量 name-age 索引的时候直接判断是否满足 age=10，不满足的就直接不用回表了。
