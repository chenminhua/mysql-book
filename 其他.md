## 为啥有时候语句看起来逻辑差不多，但是性能差很多？

很可能是因为没有用上索引，而没有用上索引很可能是因为语句里面有函数，或者发生了隐式类型转换。

尤其要注意 **隐式类型转换**，隐式字符编码转换等等。

## 为啥有时候简单的查询也会很慢很慢？

遇到这种情况先 show processlist; 看下

1. 等锁，比如等 mdl 写锁。这时候一般先把 mdl 锁对应的连接 kill 掉。
   select blocking_pid from sys.schema_table_lock_waits;

2. 等 flush。flush 会关闭打开的表。通常来说，flush 都很快，除非，它们被堵住了。所以解决方案是找出堵住 flush 的操作。

```
flush table t with read lock;
flush tables with read lock;
```

3. 等行锁，先查下是谁占着行锁。

```
select * from t sys.innodb_lock_waits where locked_table=`'test'.'t'`\G
```

4. 没索引
